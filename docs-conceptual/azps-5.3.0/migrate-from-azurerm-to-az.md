---
title: Eseguire la migrazione di script di Azure PowerShell da AzureRM ad Az
description: Informazioni sulle procedure e sugli strumenti disponibili per la migrazione degli script di Azure PowerShell da AzureRM al nuovo modulo Az di PowerShell.
ms.devlang: powershell
ms.service: azure-powershell
ms.topic: conceptual
ms.date: 12/15/2020
ms.custom: devx-track-azurepowershell, contperf-fy21q2
ms.openlocfilehash: 6bccaf9a628f67b8945516bae70f07939cdce8f7
ms.sourcegitcommit: 68451baa389791703e666d95469602c5652609ee
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/05/2021
ms.locfileid: "97893696"
---
# <a name="migrate-azure-powershell-from-azurerm-to-az"></a><span data-ttu-id="cfda1-103">Eseguire la migrazione di Azure PowerShell da AzureRM ad Az</span><span class="sxs-lookup"><span data-stu-id="cfda1-103">Migrate Azure PowerShell from AzureRM to Az</span></span>

<span data-ttu-id="cfda1-104">Tutte le versioni del modulo AzureRM PowerShell sono obsolete.</span><span class="sxs-lookup"><span data-stu-id="cfda1-104">All versions of the AzureRM PowerShell module are outdated.</span></span> <span data-ttu-id="cfda1-105">Il [modulo Az PowerShell](install-az-ps.md) è ora il modulo di PowerShell consigliato per l'interazione con Azure.</span><span class="sxs-lookup"><span data-stu-id="cfda1-105">The [Az PowerShell module](install-az-ps.md) is now the recommended PowerShell module for interacting with Azure.</span></span>

## <a name="why-a-new-module"></a><span data-ttu-id="cfda1-106">Perché è stato creato un nuovo modulo?</span><span class="sxs-lookup"><span data-stu-id="cfda1-106">Why a new module?</span></span>

<span data-ttu-id="cfda1-107">La modifica principale e anche la più importante è che, essendo [PowerShell](/powershell/scripting/overview) basato sulla libreria .NET Standard, è un prodotto multipiattaforma sin dall'introduzione.</span><span class="sxs-lookup"><span data-stu-id="cfda1-107">The biggest and most important change is that [PowerShell](/powershell/scripting/overview), being based on the .NET Standard library, has been a cross-platform product since its introduction.</span></span>

<span data-ttu-id="cfda1-108">Come per il linguaggio PowerShell, Microsoft si impegna a includere il supporto di Azure in tutte le piattaforme.</span><span class="sxs-lookup"><span data-stu-id="cfda1-108">Like the PowerShell language, we're committed to bringing Azure support to all platforms.</span></span> <span data-ttu-id="cfda1-109">Questo impegno ha evidenziato l'esigenza di aggiornare i moduli di Azure PowerShell in modo che usino .NET Standard e siano compatibili con PowerShell Core.</span><span class="sxs-lookup"><span data-stu-id="cfda1-109">Our commitment meant that the Azure PowerShell modules needed to be updated to use .NET Standard and be compatible with PowerShell Core.</span></span> <span data-ttu-id="cfda1-110">Invece di introdurre modifiche complesse nel modulo AzureRM esistente, per aggiungere questo supporto è stato creato il modulo Az.</span><span class="sxs-lookup"><span data-stu-id="cfda1-110">Rather than modifying the existing AzureRM module and introducing complex changes to add this support, the Az module was created.</span></span>

<span data-ttu-id="cfda1-111">La creazione di un nuovo modulo ha inoltre consentito ai nostri tecnici di uniformare la progettazione e la denominazione di cmdlet e moduli.</span><span class="sxs-lookup"><span data-stu-id="cfda1-111">Creating a new module also allowed our engineers to make the design, naming of cmdlets, and modules consistent.</span></span> <span data-ttu-id="cfda1-112">Ora i nomi di tutti i moduli iniziano con il prefisso `Az.` e i cmdlet usano tutti la convenzione di denominazione `Verb-AzNoun`.</span><span class="sxs-lookup"><span data-stu-id="cfda1-112">All modules now start with the `Az.` prefix and cmdlets all use the `Verb-AzNoun` naming convention.</span></span> <span data-ttu-id="cfda1-113">In precedenza, i nomi dei cmdlet erano più lunghi e incoerenti.</span><span class="sxs-lookup"><span data-stu-id="cfda1-113">Previously, cmdlet names were longer and inconsistent.</span></span>

<span data-ttu-id="cfda1-114">È stato inoltre ridotto il numero di moduli: alcuni moduli usati con gli stessi servizi sono stati raggruppati</span><span class="sxs-lookup"><span data-stu-id="cfda1-114">The number of modules were also reduced: Some modules that worked with the same services have been combined.</span></span> <span data-ttu-id="cfda1-115">e ora i cmdlet del piano di gestione e del piano dati per lo stesso servizio sono contenuti in un singolo modulo.</span><span class="sxs-lookup"><span data-stu-id="cfda1-115">Management plane and data plane cmdlets for the same service are now contained within a single module.</span></span> <span data-ttu-id="cfda1-116">Questo consolidamento semplifica di molto il lavoro di chi gestisce manualmente le dipendenze e le importazioni.</span><span class="sxs-lookup"><span data-stu-id="cfda1-116">For those of you who manually manage dependencies and imports, this consolidation makes things much simpler.</span></span>

<span data-ttu-id="cfda1-117">Apportando queste importanti modifiche, il team si è impegnato a rendere ancora più semplice l'uso di Azure con i cmdlet di PowerShell e con un numero di piattaforme maggiore rispetto alle versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="cfda1-117">By making these important changes, the team has committed to making it easier than ever before and on more platforms than previously possible to use Azure with PowerShell cmdlets.</span></span>

## <a name="upgrading-to-az-powershell"></a><span data-ttu-id="cfda1-118">Aggiornamento ad Az di PowerShell</span><span class="sxs-lookup"><span data-stu-id="cfda1-118">Upgrading to Az PowerShell</span></span>

<span data-ttu-id="cfda1-119">Gli script scritti per i cmdlet di AzureRM non funzioneranno automaticamente con Az.</span><span class="sxs-lookup"><span data-stu-id="cfda1-119">Scripts written for the AzureRM cmdlets won't automatically work with Az.</span></span> <span data-ttu-id="cfda1-120">Per semplificare la transizione, è stato sviluppato il [toolkit di migrazione da AzureRM ad Az](https://github.com/Azure/azure-powershell-migration).</span><span class="sxs-lookup"><span data-stu-id="cfda1-120">To make the transition easier, the [AzureRM to Az migration toolkit](https://github.com/Azure/azure-powershell-migration) was developed.</span></span> <span data-ttu-id="cfda1-121">Per quanto nessuna migrazione a un nuovo set di comandi sia immediata, questo articolo consentirà di iniziare la transizione al modulo Az PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfda1-121">No migration to a new command set is ever convenient, but this article will help you get started on transitioning to the Az PowerShell module.</span></span> <span data-ttu-id="cfda1-122">Per altre informazioni sui motivi per cui il modulo Az PowerShell è stato creato, vedere [Introduzione del nuovo modulo Az di Azure PowerShell](new-azureps-module-az.md).</span><span class="sxs-lookup"><span data-stu-id="cfda1-122">To learn more about why the Az PowerShell module was created, see [Introducing the new Azure PowerShell Az module](new-azureps-module-az.md).</span></span>

<span data-ttu-id="cfda1-123">I nuovi nomi dei cmdlet sono stati progettati per essere facili da imparare.</span><span class="sxs-lookup"><span data-stu-id="cfda1-123">The new cmdlet names have been designed to be easy to learn.</span></span> <span data-ttu-id="cfda1-124">Invece di usare `AzureRm` o `Azure` nei nomi dei cmdlet, usare `Az`.</span><span class="sxs-lookup"><span data-stu-id="cfda1-124">Instead of using `AzureRm` or `Azure` in cmdlet names, use `Az`.</span></span> <span data-ttu-id="cfda1-125">Ad esempio, il vecchio cmdlet `New-AzureRMVm` è diventato `New-AzVm`.</span><span class="sxs-lookup"><span data-stu-id="cfda1-125">For example, the old cmdlet `New-AzureRMVm` has become `New-AzVm`.</span></span>
<span data-ttu-id="cfda1-126">La migrazione, tuttavia, non implica solo di acquisire familiarità con i nuovi nomi dei cmdlet:</span><span class="sxs-lookup"><span data-stu-id="cfda1-126">However, migration is more than just becoming familiar with the new cmdlet names, though.</span></span> <span data-ttu-id="cfda1-127">sono presenti altre importanti modifiche, tra cui moduli e parametri rinominati.</span><span class="sxs-lookup"><span data-stu-id="cfda1-127">There are renamed modules, parameters, and other important changes.</span></span>

<span data-ttu-id="cfda1-128">Per visualizzare l'elenco completo delle modifiche di rilievo tra AzureRM e Az, vedere [Modifiche di rilievo della migrazione da AzureRM ad Az](migrate-az-1.0.0.md).</span><span class="sxs-lookup"><span data-stu-id="cfda1-128">To see the full list of breaking changes between AzureRM and Az, see the [full changes from AzureRM to Az](migrate-az-1.0.0.md).</span></span>

## <a name="ensure-existing-scripts-work-with-the-latest-azurerm-release"></a><span data-ttu-id="cfda1-129">Verificare il funzionamento degli script esistenti con l'ultima versione di AzureRM</span><span class="sxs-lookup"><span data-stu-id="cfda1-129">Ensure existing scripts work with the latest AzureRM release</span></span>

<span data-ttu-id="cfda1-130">Prima di eseguire i passaggi di migrazione, verificare quali versioni di AzureRM sono installate nel sistema.</span><span class="sxs-lookup"><span data-stu-id="cfda1-130">Before taking any migration steps, check which versions of AzureRM are installed on your system.</span></span>
<span data-ttu-id="cfda1-131">In questo modo è possibile assicurarsi che gli script siano già in esecuzione nella versione più recente, oltre a identificare le versioni di AzureRM da disinstallare.</span><span class="sxs-lookup"><span data-stu-id="cfda1-131">Doing so allows you to make sure scripts are already running on the latest release and let you know which versions of AzureRM must be uninstalled.</span></span>

<span data-ttu-id="cfda1-132">Per controllare quale versione di AzureRM è stata installata, eseguire questo esempio:</span><span class="sxs-lookup"><span data-stu-id="cfda1-132">To check which version(s) of AzureRM you have installed, run the following example:</span></span>

```azurepowershell
Get-Module -Name AzureRM -ListAvailable -All
```

<span data-ttu-id="cfda1-133">La versione **più recente** disponibile di AzureRM è la **6.13.1**.</span><span class="sxs-lookup"><span data-stu-id="cfda1-133">The **latest** available release of AzureRM is **6.13.1**.</span></span> <span data-ttu-id="cfda1-134">Se questa versione non è installata, per poter usare gli script esistenti con il modulo Az, può essere necessario apportare altre modifiche che esulano dall'ambito di questo articolo e dell'[elenco di modifiche di rilievo](migrate-az-1.0.0.md).</span><span class="sxs-lookup"><span data-stu-id="cfda1-134">If you don't have this version installed, your existing scripts may need additional modifications to work with the Az module beyond the scope of what's described in this article and in the [breaking changes list](migrate-az-1.0.0.md).</span></span>

<span data-ttu-id="cfda1-135">Se gli script non funzionano con AzureRM 6.13.1, aggiornarli in base alle indicazioni della [guida alla migrazione di AzureRM dalla versione 5.x alla versione 6.x](/powershell/azure/azurerm/migration-guide.6.0.0).</span><span class="sxs-lookup"><span data-stu-id="cfda1-135">If your scripts don't work with AzureRM 6.13.1, update them according to the [AzureRM 5.x to 6.x migration guide](/powershell/azure/azurerm/migration-guide.6.0.0).</span></span> <span data-ttu-id="cfda1-136">Se si usa una versione precedente del modulo AzureRM, sono disponibili guide alla migrazione per ogni versione principale.</span><span class="sxs-lookup"><span data-stu-id="cfda1-136">If you use an earlier version of the AzureRM module, there are migration guides available for each major version.</span></span>

## <a name="option-1-recommended-automatically-migrate-your-powershell-scripts"></a><span data-ttu-id="cfda1-137">Opzione 1 (scelta consigliata): Eseguire automaticamente la migrazione degli script di PowerShell</span><span class="sxs-lookup"><span data-stu-id="cfda1-137">Option 1 (recommended): Automatically migrate your PowerShell scripts</span></span>

<span data-ttu-id="cfda1-138">Questa opzione consigliata riduce al minimo gli interventi richiesti per la migrazione degli script di AzureRM ad Az.</span><span class="sxs-lookup"><span data-stu-id="cfda1-138">This recommended option minimizes the effort required to migrate AzureRM scripts to Az.</span></span>

### <a name="install-the-azurerm-to-az-migration-toolkit"></a><span data-ttu-id="cfda1-139">Installare il toolkit di migrazione da AzureRM ad Az</span><span class="sxs-lookup"><span data-stu-id="cfda1-139">Install the AzureRM to Az migration toolkit</span></span>

```azurepowershell
Install-Module -Name Az.Tools.Migration
```

### <a name="convert-your-scripts-automatically"></a><span data-ttu-id="cfda1-140">Convertire gli script automaticamente</span><span class="sxs-lookup"><span data-stu-id="cfda1-140">Convert your scripts automatically</span></span>

<span data-ttu-id="cfda1-141">Grazie al toolkit di migrazione da AzureRM ad Az, è possibile generare un piano per determinare quali modifiche verranno eseguite sugli script prima di apportare modifiche agli script e prima di installare il modulo Az PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfda1-141">With the AzureRM to Az migration toolkit, you can generate a plan to determine what changes will be performed on your scripts before making any modifications to them and before installing the Az PowerShell module.</span></span>

<span data-ttu-id="cfda1-142">L'avvio rapido [Eseguire automaticamente la migrazione degli script di PowerShell dal modulo AzureRM al modulo Az PowerShell](quickstart-migrate-azurerm-to-az-automatically.md) illustra in modo dettagliato l'intero processo di aggiornamento automatico degli script di PowerShell dal modulo AzureRM al modulo Az PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfda1-142">The [Automatically migrate PowerShell scripts from AzureRM to the Az PowerShell module](quickstart-migrate-azurerm-to-az-automatically.md) quickstart walks you through the entire process of automatically updating your PowerShell scripts from AzureRM to the Az PowerShell module.</span></span>

## <a name="option-2-use-compatibility-mode-with-enable-azurermalias"></a><span data-ttu-id="cfda1-143">Opzione 2: Usare la modalità di compatibilità con Enable-AzureRmAlias</span><span class="sxs-lookup"><span data-stu-id="cfda1-143">Option 2: Use compatibility mode with Enable-AzureRmAlias</span></span>

<span data-ttu-id="cfda1-144">Il modulo Az offre una modalità compatibilità che consente di usare gli script esistenti mentre esegue l'aggiornamento alla nuova sintassi.</span><span class="sxs-lookup"><span data-stu-id="cfda1-144">The Az module has a compatibility mode to help you use existing scripts while you update to the new syntax.</span></span> <span data-ttu-id="cfda1-145">Il cmdlet [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) abilita una modalità di compatibilità tramite alias.</span><span class="sxs-lookup"><span data-stu-id="cfda1-145">The [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) cmdlet enables a compatibility mode through aliases.</span></span> <span data-ttu-id="cfda1-146">Questa modalità consente di usare gli script esistenti con modifiche minime mentre si procede alla migrazione completa ad Az.</span><span class="sxs-lookup"><span data-stu-id="cfda1-146">This mode allows you to use existing scripts with minimal modification while working towards a full migration to Az.</span></span> <span data-ttu-id="cfda1-147">Per impostazione predefinita, `Enable-AzureRmAlias` abilita solo gli alias di compatibilità per la sessione corrente di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfda1-147">By default, `Enable-AzureRmAlias` only enables compatibility aliases for the current PowerShell session.</span></span> <span data-ttu-id="cfda1-148">Usare il parametro `Scope` per salvare in modo permanente gli alias di compatibilità nelle sessioni di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfda1-148">Use its `Scope` parameter to persist compatibility aliases across PowerShell sessions.</span></span> <span data-ttu-id="cfda1-149">Per altre informazioni, vedere la [documentazione di riferimento di Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias).</span><span class="sxs-lookup"><span data-stu-id="cfda1-149">For more information, see [the Enable-AzureRmAlias reference documentation](/powershell/module/az.accounts/enable-azurermalias).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cfda1-150">Anche se sono stati creati alias per i nomi dei cmdlet, possono esistere comunque parametri nuovi o rinominati oppure valori restituiti modificati per i cmdlet di Az.</span><span class="sxs-lookup"><span data-stu-id="cfda1-150">Even though the cmdlet names are aliased, there may still be new (or renamed) parameters or changed return values for the Az cmdlets.</span></span> <span data-ttu-id="cfda1-151">Tenere presente che l'abilitazione degli alias non implica l'esecuzione automatica della migrazione.</span><span class="sxs-lookup"><span data-stu-id="cfda1-151">Don't expect enabling aliases to take care of the migration for you!</span></span> <span data-ttu-id="cfda1-152">Per individuare le parti degli script che potrebbero richiedere aggiornamenti, vedere l'[elenco completo delle modifiche di rilievo](migrate-az-1.0.0.md).</span><span class="sxs-lookup"><span data-stu-id="cfda1-152">See the [full breaking changes list](migrate-az-1.0.0.md) to find where your scripts may require updates.</span></span>

## <a name="option-3-migrate-your-scripts-in-visual-studio-code-with-the-azure-powershell-extension"></a><span data-ttu-id="cfda1-153">Opzione 3: Eseguire la migrazione degli script in Visual Studio Code con l'estensione di Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="cfda1-153">Option 3: Migrate your scripts in Visual Studio Code with the Azure PowerShell extension</span></span>

### <a name="install-the-azure-powershell-extension-for-visual-studio-code"></a><span data-ttu-id="cfda1-154">Installare l'estensione di Azure PowerShell per Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="cfda1-154">Install the Azure PowerShell extension for Visual Studio Code</span></span>

<span data-ttu-id="cfda1-155">Installare l'[estensione di Azure PowerShell per VSCode](https://marketplace.visualstudio.com/items?itemName=azps-tools.azps-tools)</span><span class="sxs-lookup"><span data-stu-id="cfda1-155">Install the [Azure PowerShell extension for VSCode](https://marketplace.visualstudio.com/items?itemName=azps-tools.azps-tools)</span></span>

### <a name="convert-your-scripts-manually"></a><span data-ttu-id="cfda1-156">Convertire gli script manualmente</span><span class="sxs-lookup"><span data-stu-id="cfda1-156">Convert your scripts manually</span></span>

1. <span data-ttu-id="cfda1-157">Caricare lo script di AzureRM in VSCode</span><span class="sxs-lookup"><span data-stu-id="cfda1-157">Load your AzureRM script in VSCode</span></span>
2. <span data-ttu-id="cfda1-158">Avviare la migrazione aprendo il riquadro comandi `Ctrl+Shift+P`, quindi selezionare `Migrate Azure PowerShell script`</span><span class="sxs-lookup"><span data-stu-id="cfda1-158">Start the migration by opening the command palette `Ctrl+Shift+P` and select `Migrate Azure PowerShell script`</span></span>
3. <span data-ttu-id="cfda1-159">Selezionare la versione di origine `AzureRM`</span><span class="sxs-lookup"><span data-stu-id="cfda1-159">Select source version `AzureRM`</span></span>
4. <span data-ttu-id="cfda1-160">Seguire le procedure consigliate per ogni comando o parametro sottolineato.</span><span class="sxs-lookup"><span data-stu-id="cfda1-160">Follow the recommended actions for each underlined command or parameter.</span></span>

## <a name="next-steps"></a><span data-ttu-id="cfda1-161">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="cfda1-161">Next steps</span></span>

* [<span data-ttu-id="cfda1-162">Disinstallare AzureRM</span><span class="sxs-lookup"><span data-stu-id="cfda1-162">Uninstall AzureRM</span></span>](uninstall-az-ps.md#uninstall-the-azurerm-module)
* [<span data-ttu-id="cfda1-163">Installare Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="cfda1-163">Install Azure PowerShell</span></span>](install-az-ps.md)
