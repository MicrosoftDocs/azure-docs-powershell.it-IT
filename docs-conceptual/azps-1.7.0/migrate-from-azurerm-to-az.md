---
title: Eseguire la migrazione di script di Azure PowerShell da AzureRM ad Az
description: Informazioni sui passaggi e gli strumenti per eseguire la migrazione di script dal modulo AzureRM al nuovo modulo Az.
author: sptramer
ms.author: sttramer
manager: carmonm
ms.devlang: powershell
ms.topic: conceptual
ms.date: 12/13/2018
ms.openlocfilehash: 28122ca953d62b405f19effbbc680f2dc6202cca
ms.sourcegitcommit: ae4540a90508db73335a54408dfd6cdf3712a1e9
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2019
ms.locfileid: "59364187"
---
# <a name="migrate-from-azurerm-to-azure-powershell-az"></a><span data-ttu-id="b4d0b-103">Eseguire la migrazione da AzureRM ad Az di Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="b4d0b-103">Migrate from AzureRM to Azure PowerShell Az</span></span>

<span data-ttu-id="b4d0b-104">Il modulo Az offre parità delle funzionalità rispetto ad AzureRM, ma usa nomi di cmdlet più brevi e coerenti.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-104">The Az module has feature parity with AzureRM, but uses shorter and more consistent cmdlet names.</span></span>
<span data-ttu-id="b4d0b-105">Gli script scritti per i cmdlet di AzureRM non funzioneranno automaticamente con il nuovo modulo.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-105">Scripts written for the AzureRM cmdlets won't automatically work with the new module.</span></span> <span data-ttu-id="b4d0b-106">Per facilitare la transizione, Az offre strumenti che consentono di eseguire gli script esistenti con AzureRM.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-106">To make the transition easier, Az offers tools to allow you to run your existing scripts using AzureRM.</span></span> <span data-ttu-id="b4d0b-107">Per quanto nessuna migrazione a un nuovo set di comandi sia immediata, questo articolo consentirà di iniziare la transizione al nuovo modulo.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-107">No migration to a new command set is ever convenient, but this article will help you get started on transitioning to the new module.</span></span>

<span data-ttu-id="b4d0b-108">Per visualizzare l'elenco completo delle modifiche che causano un'interruzione tra AzureRM e Az, vedere [Guida alla migrazione per Az 1.0.0](migrate-az-1.0.0.md)</span><span class="sxs-lookup"><span data-stu-id="b4d0b-108">To see the full list of breaking changes between AzureRM and Az, see the [Migration guide for Az 1.0.0](migrate-az-1.0.0.md)</span></span>

## <a name="check-for-installed-versions-of-azurerm"></a><span data-ttu-id="b4d0b-109">Controllo delle versioni installate di AzureRM</span><span class="sxs-lookup"><span data-stu-id="b4d0b-109">Check for installed versions of AzureRM</span></span>

<span data-ttu-id="b4d0b-110">Il modulo Az può essere installato insieme al modulo AzureRM, ma questo non è consigliato.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-110">The Az module can be installed side-by-side with the AzureRM module, but this is not recommended.</span></span> <span data-ttu-id="b4d0b-111">Prima di eseguire i passaggi di migrazione, verificare quali versioni di AzureRM sono installate nel sistema.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-111">Before taking any migration steps, check which versions of AzureRM are installed on your system.</span></span> <span data-ttu-id="b4d0b-112">In questo modo è possibile assicurarsi che gli script siano già in esecuzione nella versione più recente e sapere se è possibile abilitare gli alias dei comandi senza disinstallare AzureRM.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-112">Doing so allows you to make sure scripts are already running on the latest release, and let you know if you can enable command aliases without uninstalling AzureRM.</span></span>

<span data-ttu-id="b4d0b-113">Per controllare quale versione di AzureRM è stata installata, eseguire il comando:</span><span class="sxs-lookup"><span data-stu-id="b4d0b-113">To check which version(s) of AzureRM you have installed, run the command:</span></span>

```powershell-interactive
Get-InstalledModule -Name AzureRM -AllVersions
```

## <a name="ensure-your-existing-scripts-work-with-the-latest-azurerm-release"></a><span data-ttu-id="b4d0b-114">Verificare il funzionamento degli script esistenti con l'ultima versione di AzureRM</span><span class="sxs-lookup"><span data-stu-id="b4d0b-114">Ensure your existing scripts work with the latest AzureRM release</span></span>

<span data-ttu-id="b4d0b-115">È il passaggio più importante.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-115">This is the most important step!</span></span> <span data-ttu-id="b4d0b-116">Eseguire gli script esistenti e verificarne il funzionamento con l'_ultima_ versione di AzureRM (__6.13.1__).</span><span class="sxs-lookup"><span data-stu-id="b4d0b-116">Run your existing scripts, and make sure that they work with the _latest_ release of AzureRM (__6.13.1__).</span></span> <span data-ttu-id="b4d0b-117">Se gli script non funzionano, vedere la [guida alla migrazione per AzureRM](/powershell/azure/azurerm/migration-guide.6.0.0).</span><span class="sxs-lookup"><span data-stu-id="b4d0b-117">If your scripts don't work, make sure to read the [AzureRM migration guide](/powershell/azure/azurerm/migration-guide.6.0.0).</span></span>

## <a name="install-the-azure-powershell-az-module"></a><span data-ttu-id="b4d0b-118">Installare il modulo Az di Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="b4d0b-118">Install the Azure PowerShell Az module</span></span>

<span data-ttu-id="b4d0b-119">Il primo passaggio consiste nell'installare il modulo Az nella piattaforma.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-119">The first step is to install the Az module on your platform.</span></span> <span data-ttu-id="b4d0b-120">Quando si installa Az, è consigliabile disinstallare AzureRM.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-120">When you install Az, it's recommended that you uninstall AzureRM.</span></span> <span data-ttu-id="b4d0b-121">I passaggi riportati di seguito illustreranno come continuare a eseguire gli script esistenti e abilitare la compatibilità per i nomi dei cmdlet precedenti.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-121">In the following steps, you'll learn how to keep running your existing scripts and enable compatibility for old cmdlet names.</span></span>

<span data-ttu-id="b4d0b-122">Per installare il modulo Az di Azure PowerShell, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="b4d0b-122">To install the Azure PowerShell Az module, follow these steps:</span></span>

* <span data-ttu-id="b4d0b-123">__CONSIGLIATO__: [Disinstallare il modulo AzureRM](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span><span class="sxs-lookup"><span data-stu-id="b4d0b-123">__RECOMMENDED__: [Uninstall the AzureRM module](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span></span>
  <span data-ttu-id="b4d0b-124">Assicurarsi di rimuovere _tutte_ le versioni installate di AzureRM, non solo quella più recente.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-124">Make sure that you remove _all_ installed versions of AzureRM, not just the most recent version.</span></span>
* <span data-ttu-id="b4d0b-125">[Installare il modulo Az](install-az-ps.md).</span><span class="sxs-lookup"><span data-stu-id="b4d0b-125">[Install the Az module](install-az-ps.md)</span></span>

## <a name="a-namealiasesenable-azurerm-compatibility-aliases"></a><span data-ttu-id="b4d0b-126"><a name="aliases"/>Abilitare gli alias per la compatibilità di AzureRM</span><span class="sxs-lookup"><span data-stu-id="b4d0b-126"><a name="aliases"/>Enable AzureRM compatibility aliases</span></span> 

> [!IMPORTANT]
>
> <span data-ttu-id="b4d0b-127">Abilitare la modalità di compatibilità solo se sono state disinstallate _tutte_ le versioni di AzureRM.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-127">Only enable compatibility mode if you've uninstalled _all_ versions of AzureRM.</span></span> <span data-ttu-id="b4d0b-128">L'abilitazione della modalità di compatibilità con i cmdlet di AzureRM ancora disponibili può causare comportamenti imprevisti.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-128">Enabling compatibility mode with AzureRM cmdlets still available may result in unpredictable behavior.</span></span> <span data-ttu-id="b4d0b-129">Ignorare questo passaggio se si è scelto di mantenere AzureRM installato, ma tenere presente che qualsiasi cmdlet di AzureRM userà i moduli precedenti e non chiamerà i cmdlet di Az.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-129">Skip this step if you decided to keep AzureRM installed, but be aware that any AzureRM cmdlets will use the older modules and not call any Az cmdlets.</span></span>

<span data-ttu-id="b4d0b-130">Dopo la verifica del funzionamento degli script con l'ultima versione di AzureRM e la disinstallazione di AzureRM, il passaggio successivo consiste nell'abilitare la modalità compatibilità per il modulo Az.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-130">With AzureRM uninstalled and your scripts working with the latest AzureRM version, the next step is to enable the compatibility mode for the Az module.</span></span> <span data-ttu-id="b4d0b-131">La compatibilità viene abilitata con questo comando:</span><span class="sxs-lookup"><span data-stu-id="b4d0b-131">Compatibility is enabled with the command:</span></span>

```powershell-interactive
Enable-AzureRmAlias -Scope CurrentUser
```

<span data-ttu-id="b4d0b-132">Gli alias offrono la possibilità di usare i nomi dei cmdlet precedenti con il modulo Az installato.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-132">Aliases enable the ability to use old cmdlet names with the Az module installed.</span></span> <span data-ttu-id="b4d0b-133">Gli alias vengono scritti nel profilo utente per l'ambito selezionato.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-133">These aliases are written to the user profile for the selected scope.</span></span> <span data-ttu-id="b4d0b-134">Se non esistono profili utente, ne viene creato uno.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-134">If no user profile exists, one is created.</span></span>

> [!WARNING]
>
> <span data-ttu-id="b4d0b-135">È possibile usare un valore di `-Scope` diverso per il comando, ma non è consigliabile.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-135">You can use a different `-Scope` for this command, but it's not recommended.</span></span> <span data-ttu-id="b4d0b-136">Dato che gli alias vengono scritti nel profilo utente per l'ambito selezionato, abilitarli per un ambito il più limitato possibile.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-136">Aliases are written to the user profile for the selected scope, so keep enabling them to as limited a scope as possible.</span></span> <span data-ttu-id="b4d0b-137">L'abilitazione degli alias a livello di sistema potrebbe anche causare problemi per altri utenti nel cui ambito locale è installato AzureRM.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-137">Enabling aliases system-wide could also cause issues for other users which have AzureRM installed in their local scope.</span></span>

<span data-ttu-id="b4d0b-138">Dopo aver abilitato la modalità alias, eseguire di nuovo gli script per verificare che continuino a funzionare come previsto.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-138">Once the alias mode is enabled, run your scripts again to confirm that they still function as expected.</span></span> 

## <a name="change-module-imports-and-cmdlet-names"></a><span data-ttu-id="b4d0b-139">Modificare i nomi dei cmdlet e le importazioni del modulo</span><span class="sxs-lookup"><span data-stu-id="b4d0b-139">Change module imports and cmdlet names</span></span>

<span data-ttu-id="b4d0b-140">In generale, i nomi del modulo e i cmdlet sono stati modificati sostituendo `AzureRM` e `Azure` con `Az`.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-140">In general, the module names have been changed so that `AzureRM` and `Azure` become `Az`, and the same for cmdlets.</span></span>
<span data-ttu-id="b4d0b-141">Il modulo `AzureRM.Compute`, ad esempio, è stato rinominato `Az.Compute`.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-141">For example, the `AzureRM.Compute` module has been renamed to `Az.Compute`.</span></span> <span data-ttu-id="b4d0b-142">`New-AzureRMVM` è diventato `New-AzVM` e `Get-AzureStorageBlob` è ora `Get-AzStorageBlob`.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-142">`New-AzureRMVM` has become `New-AzVM`, and `Get-AzureStorageBlob` is now `Get-AzStorageBlob`.</span></span>

<span data-ttu-id="b4d0b-143">È opportuno essere a conoscenza delle eccezioni a tale modifica dei nomi.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-143">There are exceptions to this naming change that you should be aware of.</span></span> <span data-ttu-id="b4d0b-144">Alcuni moduli sono stati rinominati o uniti in moduli esistenti senza che questo influenzi il suffisso dei relativi cmdlet, a parte la modifica di `AzureRM` o `Azure` in `Az`.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-144">Some modules were renamed or merged into existing modules without this affecting the suffix of their cmdlets, other than changing `AzureRM` or `Azure` to `Az`.</span></span> <span data-ttu-id="b4d0b-145">Diversamente il suffisso del cmdlet completo è stato modificato per riflettere il nuovo nome del modulo.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-145">Otherwise, the full cmdlet suffix was changed to reflect the new module name.</span></span>

| <span data-ttu-id="b4d0b-146">Modulo AzureRM</span><span class="sxs-lookup"><span data-stu-id="b4d0b-146">AzureRM module</span></span> | <span data-ttu-id="b4d0b-147">Modulo Az</span><span class="sxs-lookup"><span data-stu-id="b4d0b-147">Az module</span></span> | <span data-ttu-id="b4d0b-148">Modifica del suffisso del cmdlet</span><span class="sxs-lookup"><span data-stu-id="b4d0b-148">Cmdlet suffix changed?</span></span> |
|----------------|-----------|------------------------|
| <span data-ttu-id="b4d0b-149">AzureRM.Profile</span><span class="sxs-lookup"><span data-stu-id="b4d0b-149">AzureRM.Profile</span></span> | <span data-ttu-id="b4d0b-150">Az.Accounts</span><span class="sxs-lookup"><span data-stu-id="b4d0b-150">Az.Accounts</span></span> | <span data-ttu-id="b4d0b-151">Sì</span><span class="sxs-lookup"><span data-stu-id="b4d0b-151">Yes</span></span> |
| <span data-ttu-id="b4d0b-152">AzureRM.Insights</span><span class="sxs-lookup"><span data-stu-id="b4d0b-152">AzureRM.Insights</span></span> | <span data-ttu-id="b4d0b-153">Az.Monitor</span><span class="sxs-lookup"><span data-stu-id="b4d0b-153">Az.Monitor</span></span> | <span data-ttu-id="b4d0b-154">Sì</span><span class="sxs-lookup"><span data-stu-id="b4d0b-154">Yes</span></span> |
| <span data-ttu-id="b4d0b-155">AzureRM.DataFactories</span><span class="sxs-lookup"><span data-stu-id="b4d0b-155">AzureRM.DataFactories</span></span> | <span data-ttu-id="b4d0b-156">Az.DataFactory</span><span class="sxs-lookup"><span data-stu-id="b4d0b-156">Az.DataFactory</span></span> | <span data-ttu-id="b4d0b-157">Sì</span><span class="sxs-lookup"><span data-stu-id="b4d0b-157">Yes</span></span> |
| <span data-ttu-id="b4d0b-158">AzureRM.DataFactoryV2</span><span class="sxs-lookup"><span data-stu-id="b4d0b-158">AzureRM.DataFactoryV2</span></span> | <span data-ttu-id="b4d0b-159">Az.DataFactory</span><span class="sxs-lookup"><span data-stu-id="b4d0b-159">Az.DataFactory</span></span> | <span data-ttu-id="b4d0b-160">Sì</span><span class="sxs-lookup"><span data-stu-id="b4d0b-160">Yes</span></span> |
| <span data-ttu-id="b4d0b-161">AzureRM.RecoveryServices.Backup</span><span class="sxs-lookup"><span data-stu-id="b4d0b-161">AzureRM.RecoveryServices.Backup</span></span> | <span data-ttu-id="b4d0b-162">Az.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="b4d0b-162">Az.RecoveryServices</span></span> | <span data-ttu-id="b4d0b-163">No </span><span class="sxs-lookup"><span data-stu-id="b4d0b-163">No</span></span> |
| <span data-ttu-id="b4d0b-164">AzureRM.RecoveryServices.SiteRecovery</span><span class="sxs-lookup"><span data-stu-id="b4d0b-164">AzureRM.RecoveryServices.SiteRecovery</span></span> | <span data-ttu-id="b4d0b-165">Az.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="b4d0b-165">Az.RecoveryServices</span></span> | <span data-ttu-id="b4d0b-166">No </span><span class="sxs-lookup"><span data-stu-id="b4d0b-166">No</span></span> |
| <span data-ttu-id="b4d0b-167">AzureRM.Tags</span><span class="sxs-lookup"><span data-stu-id="b4d0b-167">AzureRM.Tags</span></span> | <span data-ttu-id="b4d0b-168">Az.Resources</span><span class="sxs-lookup"><span data-stu-id="b4d0b-168">Az.Resources</span></span> | <span data-ttu-id="b4d0b-169">No </span><span class="sxs-lookup"><span data-stu-id="b4d0b-169">No</span></span> |
| <span data-ttu-id="b4d0b-170">AzureRM.MachineLearningCompute</span><span class="sxs-lookup"><span data-stu-id="b4d0b-170">AzureRM.MachineLearningCompute</span></span> | <span data-ttu-id="b4d0b-171">Az.MachineLearning</span><span class="sxs-lookup"><span data-stu-id="b4d0b-171">Az.MachineLearning</span></span> | <span data-ttu-id="b4d0b-172">No </span><span class="sxs-lookup"><span data-stu-id="b4d0b-172">No</span></span> |
| <span data-ttu-id="b4d0b-173">AzureRM.UsageAggregates</span><span class="sxs-lookup"><span data-stu-id="b4d0b-173">AzureRM.UsageAggregates</span></span> | <span data-ttu-id="b4d0b-174">Az.Billing</span><span class="sxs-lookup"><span data-stu-id="b4d0b-174">Az.Billing</span></span> | <span data-ttu-id="b4d0b-175">No </span><span class="sxs-lookup"><span data-stu-id="b4d0b-175">No</span></span> |
| <span data-ttu-id="b4d0b-176">AzureRM.Consumption</span><span class="sxs-lookup"><span data-stu-id="b4d0b-176">AzureRM.Consumption</span></span> | <span data-ttu-id="b4d0b-177">Az.Billing</span><span class="sxs-lookup"><span data-stu-id="b4d0b-177">Az.Billing</span></span> | <span data-ttu-id="b4d0b-178">No </span><span class="sxs-lookup"><span data-stu-id="b4d0b-178">No</span></span> |

## <a name="summary"></a><span data-ttu-id="b4d0b-179">Summary</span><span class="sxs-lookup"><span data-stu-id="b4d0b-179">Summary</span></span>

<span data-ttu-id="b4d0b-180">Seguendo questi passaggi è possibile aggiornare tutti gli script esistenti in modo da usare il nuovo modulo.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-180">By following these steps, you can update all of your existing scripts to use the new module.</span></span> <span data-ttu-id="b4d0b-181">In caso di domande o problemi con questi passaggi che hanno reso difficile la migrazione, lasciare un commento su questo articolo per consentire un miglioramento delle istruzioni.</span><span class="sxs-lookup"><span data-stu-id="b4d0b-181">If you have any questions or problems with these steps that made your migration difficult, please comment on this article so that we can improve the instructions.</span></span>
