---
external help file: Microsoft.WindowsAzure.Commands.ServiceManagement.dll-Help.xml
ms.assetid: FDA81DCB-04A4-44E5-89CD-3C36F9BB6FA9
online version: ''
schema: 2.0.0
ms.openlocfilehash: 47ae6d45fd2043d394fa7884863a3235eaa0f8d5
ms.sourcegitcommit: 56ed085a868afa8263f8eb0f755b5822f5c29532
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/18/2020
ms.locfileid: "94023750"
---
# Set-AzureVMMicrosoftAntimalwareExtension

## Sinossi
Configura l'estensione antimalware Microsoft per una macchina virtuale.

## SINTASSI

### EnableMicrosoftAntimalwareExtensionJsonConfigFilePath (impostazione predefinita)
```
Set-AzureVMMicrosoftAntimalwareExtension [-AntimalwareConfigFile] <String> [[-Version] <String>]
 [[-Monitoring] <String>] [[-StorageContext] <AzureStorageContext>] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### EnableMicrosoftAntimalwareExtensionJsonConfig
```
Set-AzureVMMicrosoftAntimalwareExtension [-AntimalwareConfiguration] <String> [[-Version] <String>]
 [[-Monitoring] <String>] [[-StorageContext] <AzureStorageContext>] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### DisableMicrosoftAntimalwareExtension
```
Set-AzureVMMicrosoftAntimalwareExtension [[-Version] <String>] [-Disable] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### UninstallMicrosoftAntimalwareExtension
```
Set-AzureVMMicrosoftAntimalwareExtension [-Uninstall] -VM <IPersistentVM> [-Profile <AzureSMProfile>]
 [-InformationAction <ActionPreference>] [-InformationVariable <String>] [<CommonParameters>]
```

### ConfigureMicrosoftAntimalwareMonitoring
```
Set-AzureVMMicrosoftAntimalwareExtension [-Monitoring] <String> [[-StorageContext] <AzureStorageContext>]
 [-NoConfig] -VM <IPersistentVM> [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>]
 [-InformationVariable <String>] [<CommonParameters>]
```

## Descrizione
Il cmdlet **set-AzureVMMicrosoftAntimalwareExtension** configura l'estensione antimalware Microsoft per una macchina virtuale.
È possibile abilitare, disabilitare o disinstallare l'estensione.

## ESEMPI

### Esempio 1: abilitare l'estensione usando un file di configurazione
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfigFile 'C:\configuration\contosoVM.json' | Update-AzureVM
```

Questo comando Abilita l'estensione antimalware Microsoft usando un file di configurazione.
Il comando usa il cmdlet **Get-AzureVM** per ottenere l'oggetto macchina virtuale specificato e quindi passa l'oggetto al cmdlet corrente usando l'operatore pipeline.

### Esempio 2: abilitare l'estensione e abilitare il monitoraggio
```
PS C:\> $StorageContext = New-AzureStorageContext -StorageAccountName "contosostoragemain" -StorageAccountKey (Get-AzureStorageKey -StorageAccountName "Contosostoragemain").PrimaryP
S C:\> Get-AzureVM -ServiceName "ContosoService03" -Name"ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfigFile 'C:\configuration\contosoVM.json" -Monitoring ON -StorageContext $StorageContext | Update-AzureVM
```

Il primo comando crea un oggetto AzureStorageContext usando il cmdlet **New-AzureStorageContext** e lo archivia nella variabile $StorageContext.

### Esempio 3: abilitare l'estensione specificando un oggetto Configuration
```
PS C:\> $Config_String = [IO.File]::ReadAllText('C:\configuration\contosoVM.json')
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfiguration $Config_String | Update-AzureVM
```

Il primo comando crea un oggetto String leggendo una configurazione JSON per l'estensione antimalware Microsoft e quindi archiviarlo nella variabile $config _string.

### Esempio 4: disabilitare l'estensione
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -Disable | Update-AzureVM
```

Questo comando Disabilita l'estensione senza rimuoverla.
Il comando USA Get-AzureVM per ottenere l'oggetto macchina virtuale specificato e quindi passa l'oggetto al cmdlet corrente.

### Esempio 5: rimuovere l'estensione
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name"ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -Uninstall | Update-AzureVM
```

Questo comando rimuove l'estensione antimalware Microsoft dalla macchina virtuale.
Il comando USA Get-AzureVM per ottenere l'oggetto macchina virtuale specificato e quindi passa l'oggetto al cmdlet corrente.

## PARAMETRI

### -AntimalwareConfigFile
Specifica il percorso assoluto del file di configurazione antimalware Microsoft.
Non specificare questo parametro se specifichi il parametro AntimalwareConfiguration.
Il file di configurazione deve includere, come minimo, il contenuto seguente per abilitare l'estensione antimalware Microsoft: 

`{ "AntimalwareEnabled": true }`

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -AntimalwareConfiguration
Specifica un oggetto String che contiene la configurazione antimalware Microsoft.
Questo oggetto non deve essere $Null o vuoto.
Non specificare questo parametro se specifichi il parametro AntimalwareConfigFile.
L'oggetto di configurazione deve includere almeno il contenuto seguente per abilitare l'estensione antimalware Microsoft: * * * * {"AntimalwareEnabled": true}

Esempio di configurazione JSON di Microsoft Antimalware: 

{"AntimalwareEnabled": true, "RealtimeProtectionEnabled": true, "ScheduledScanSettings": {"IsEnabled": true, "Day": 1, "Time": 120, "scanType": "full"},

"Esclusioni": {"estensioni": ". EXT1;. ext2 "," percorsi ":" c:\excluded-Path-1; c:\excluded-Path-2 "," processi ":" excludedproc1.exe; excludedproc2.exe "}

}

Note: AntimalwareEnabled è un parametro obbligatorio.
Valori: true = Enable.
false = errore come falso non è un valore supportato

RealtimeProtectionEnabled: vero/falso. true = Enable.
false = Disable.
Il valore predefinito è true

ScheduledScanSettings:  
IsEnabled = vero/falso giorno = 0-8 (0-giorno, 1-domenica, 2-Lunedi,...., 7-sabato, 8-disabilitato) tempo = 0-1440 (misurato in minuti dopo la mezzanotte-60- \> 01:00, 120- \> 02:00,...) scanType = "rapido" o "completo" (il valore predefinito è Quick) Nota: se IsEnabled = true è l'unica impostazione specificata, i valori predefiniti seguenti sono impostati: Day = 7 (sabato), Time = 120 (2 AM), scanType = "Quick" esclusioni: più esclusioni nello stesso elenco vengono specificate usando i delimitatori del punto e virgola.

Se non vengono specificate esclusioni, le esclusioni esistenti verranno sovrascritte da blank nel sistema.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfig
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Disable
Indica che il cmdlet disabilita l'estensione antimalware Microsoft.
Per abilitare di nuovo l'estensione nella stessa macchina virtuale, eseguire Set-AzureVMMicrosoftAntimalwareExtension senza il parametro disable.

```yaml
Type: SwitchParameter
Parameter Sets: DisableMicrosoftAntimalwareExtension
Aliases: 

Required: False
Position: 2
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -InformationAction
Specifica il modo in cui questo cmdlet risponde a un evento informativo.

I valori accettabili per questo parametro sono i seguenti:

- Continuare
- Ignora
- Informarsi
- SilentlyContinue
- Stop
- Sospensione

```yaml
Type: ActionPreference
Parameter Sets: (All)
Aliases: infa

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -InformationVariable
Specifica una variabile di informazioni.

```yaml
Type: String
Parameter Sets: (All)
Aliases: iv

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -Monitoraggio
Specifica se raccogliere eventi antimalware Microsoft.

I valori accettabili per questo parametro sono i seguenti:

- Nella.
Raccogliere gli eventi Microsoft antimalware nel contesto di archiviazione. 
- Disattivare.
Non raccogliere eventi antimalware Microsoft.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig
Aliases: 

Required: False
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

```yaml
Type: String
Parameter Sets: ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: True
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Noconfig
Indica che questo cmdlet specifica l'opzione noconfig.

```yaml
Type: SwitchParameter
Parameter Sets: ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: True
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Profile
Specifica il profilo Azure da cui viene letto il cmdlet.
Se non specifichi un profilo, questo cmdlet viene letto dal profilo predefinito locale.

```yaml
Type: AzureSMProfile
Parameter Sets: (All)
Aliases: 

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -StorageContext
Specifica un contesto di archiviazione di Azure per il monitoraggio Microsoft antimalware.

```yaml
Type: AzureStorageContext
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig, ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: False
Position: 4
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Disinstalla
Indica che questo cmdlet Disinstalla l'estensione antimalware Microsoft dalla macchina virtuale.
Se il monitoraggio è stato attivato, il cmdlet rimuove anche la raccolta di eventi antimalware Microsoft.

```yaml
Type: SwitchParameter
Parameter Sets: UninstallMicrosoftAntimalwareExtension
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Versione
Specifica la versione dell'estensione come stringa. Nota: la versione supportata è 1,5. Le versioni precedenti non sono supportate da Microsoft.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig, DisableMicrosoftAntimalwareExtension
Aliases: 

Required: False
Position: 2
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -VM
Specifica la macchina virtuale come oggetto IPersistentVM.

```yaml
Type: IPersistentVM
Parameter Sets: (All)
Aliases: InputObject

Required: True
Position: Named
Default value: None
Accept pipeline input: True (ByPropertyName, ByValue)
Accept wildcard characters: False
```

### CommonParameters
Questo cmdlet supporta i parametri comuni:-debug,-ErrorAction,-ErrorVariable,-InformationAction,-InformationVariable,-OutVariable,-OutBuffer,-PipelineVariable,-Verbose,-WarningAction e-WarningVariable. Per altre informazioni, Vedi about_CommonParameters ( https://go.microsoft.com/fwlink/?LinkID=113216) .

## INGRESSI

## OUTPUT

## Note

## COLLEGAMENTI CORRELATI

[Get-AzureVMMicrosoftAntimalwareExtension](./Get-AzureVMMicrosoftAntimalwareExtension.md)

[Remove-AzureVMMicrosoftAntimalwareExtension](./Remove-AzureVMMicrosoftAntimalwareExtension.md)

[Get-AzureVM](./Get-AzureVM.md)


